$(document).on('keyup','.js_cart_count input',function(e){e.target.value=e.target.value.replace(/,/g,'.');cart_block_submit($(this))});$(document).on('change','.js_cart_block_form input[type=number], .js_cart_count input',cart_block_submit);$(document).on('click','.js_cart_block_form .js_cart_count_minus',function(){cart_block_submit($(this))});$(document).on('click','.js_cart_block_form .js_cart_count_plus',function(){cart_block_submit($(this))});$(document).on('click','.js_cart_block_form .js_cart_remove',function(){$(this).find('input[type=checkbox]').prop('checked',!0);$(this).find('input[type=hidden]').val(1);cart_block_submit($(this))});function cart_block_submit(self){$(self.parents('form')).submit()}
diafan_ajax.success.cart_recalc=function(form,response){var errors='';if(response.errors!=undefined){errors=response.errors[0]}
$('.js-cart-errors_count').remove();setTimeout(()=>{if(errors=='Извините, Вы запросили больше товара, чем имеется на складе. Изменения сохранены.'){$('.js_cart_block_form').prepend('<p class="js-cart-errors_count cart-errors_count block-4 padding-20 margin-bottom-30">Извините, Вы запросили больше товара, чем имеется на складе.</p>');$('html, body').animate({scrollTop:$('.js-cart-errors_count').offset().top-20},400)}
$('img').lazyLoadXT()},500)}